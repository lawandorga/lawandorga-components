import $ from"./FormInput.c6388aea.js";import f from"./FormTextarea.a49b1648.js";import w from"./FormSelect.c82b104c.js";import U from"./ButtonNormal.eca46e5d.js";import{d as B,r as l,o,b as n,e as h,F as b,g as y,f as i,a as E,w as u,t as m,J as C,c as r,K as F,I as j,n as T}from"./app.2d6b4786.js";import I from"./FormMultiple.3171201f.js";import L from"./FormList.b1dfc214.js";import M from"./FormCheckbox.b61201d6.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import"./FormLabel.0e93f219.js";import"./FormHelptext.ffa3748c.js";import"./CircleLoader.ce404ea8.js";import"./XIcon.7d7ce08d.js";import"./headlessui.esm.7047c5aa.js";const O=B({components:{FormCheckbox:M,ButtonBlue:U,FormSelect:w,FormInput:$,FormTextarea:f,FormMultiple:I,FormList:L},props:{fields:{type:Array,required:!0},initial:{type:Object,default:null,required:!1},success:{type:String,required:!1,default:""},submit:{type:String,required:!1,default:"Send"},cancel:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},request:{type:Function,required:!1,default:null}},emits:["success","error","cancel","change"],data(){return{showSuccess:!1,nonFieldErrors:[],errors:{},data:{},loading:!1}},watch:{initial:function(t){this.data=Object.assign({},t,this.data)},data:{deep:!0,handler(t){this.$emit("change",t)}}},mounted(){this.data=Object.assign({},this.initial)},methods:{handleSubmit(){this.showSuccess=!1,this.loading=!0,this.sendRequest(this.data)},sendRequest(t){this.errors={},this.nonFieldErrors=[],this.fields.map(a=>a.type).includes("file")&&(t=new FormData(this.$refs.form),this.initial&&Object.keys(this.initial).forEach(a=>{a in t||t.set(a,this.initial[a])})),this.request(t).then(a=>this.handleSuccess(a)).catch(a=>this.handleError(a.response?a.response.data:{}))},handleSuccess(t){this.showSuccess=!0,this.loading=!1,this.$emit("success",t)},handleError(t){t.detail?this.nonFieldErrors=[t.detail]:(this.errors=t,this.nonFieldErrors=t.non_field_errors),this.loading=!1,this.$emit("error",t)}}}),R={class:"grid grid-cols-1 gap-4"},z={key:0},A={key:6,class:"text-red-700 text-sm leading-tight ml-1.5 mt-1"},G={class:"pt-2 flex items-center justify-end print:hidden"},J={key:0,class:"text-green-700"};function K(t,a,H,P,Q,W){const V=l("FormTextarea"),g=l("FormSelect"),q=l("FormMultiple"),S=l("FormList"),k=l("FormCheckbox"),v=l("FormInput"),p=l("ButtonBlue");return o(),n("form",{ref:"form",onSubmit:a[5]||(a[5]=j((...e)=>t.handleSubmit&&t.handleSubmit(...e),["prevent"]))},[h("div",R,[t.nonFieldErrors&&t.nonFieldErrors.length?(o(),n("div",z,[(o(!0),n(b,null,y(t.nonFieldErrors,(e,d)=>(o(),n("p",{key:d,class:"text-red-700 text-sm leading-tight mt-2"},m(e),1))),128))])):i("",!0),(o(!0),n(b,null,y(t.fields,e=>{var d,c;return o(),n("div",{key:e.name,class:T({hidden:e.type==="hidden"})},[e.type==="textarea"?(o(),r(V,{key:0,modelValue:t.data[e.name],"onUpdate:modelValue":[s=>t.data[e.name]=s,a[0]||(a[0]=s=>t.showSuccess=!1)],label:e.label,name:e.name,type:e.type,required:e.required,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","label","name","type","required","placeholder"])):e.type==="select"?(o(),r(g,{key:1,modelValue:t.data[e.name],"onUpdate:modelValue":[s=>t.data[e.name]=s,a[1]||(a[1]=s=>t.showSuccess=!1)],label:e.label,name:e.name,required:e.required,options:(d=e.options)!=null?d:[]},null,8,["modelValue","onUpdate:modelValue","label","name","required","options"])):e.type==="multiple"?(o(),r(q,{key:2,modelValue:t.data[e.name],"onUpdate:modelValue":[s=>t.data[e.name]=s,a[2]||(a[2]=s=>t.showSuccess=!1)],label:e.label,name:e.name,required:e.required,options:(c=e.options)!=null?c:[]},null,8,["modelValue","onUpdate:modelValue","label","name","required","options"])):e.type==="list"?(o(),r(S,{key:3,modelValue:t.data[e.name],"onUpdate:modelValue":s=>t.data[e.name]=s,required:e.required,label:e.label,helptext:e.helptext,name:e.name},null,8,["modelValue","onUpdate:modelValue","required","label","helptext","name"])):e.type==="checkbox"?(o(),r(k,{key:4,modelValue:t.data[e.name],"onUpdate:modelValue":s=>t.data[e.name]=s,label:e.label,helptext:e.helptext},null,8,["modelValue","onUpdate:modelValue","label","helptext"])):(o(),r(v,{key:5,modelValue:t.data[e.name],"onUpdate:modelValue":[s=>t.data[e.name]=s,a[3]||(a[3]=s=>t.showSuccess=!1)],label:e.label,autocomplete:e.autocomplete,name:e.name,disabled:e.disabled,type:e.type,required:e.required,placeholder:e.placeholder,helptext:e.helptext},null,8,["modelValue","onUpdate:modelValue","label","autocomplete","name","disabled","type","required","placeholder","helptext"])),t.errors[e.name]?(o(),n("p",A,m(t.errors[e.name][0]),1)):i("",!0)],2)}),128)),h("div",G,[E(C,{"enter-active-class":"transition duration-200 opacity-0","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-to-class":"opacity-0","leave-active-class":"transition duration-150",tag:"div",class:"mr-auto"},{default:u(()=>[t.showSuccess?(o(),n("p",J,m(t.success),1)):i("",!0)]),_:1}),t.cancel?(o(),r(p,{key:0,class:"mr-3",kind:"secondary",type:"button",onClick:a[4]||(a[4]=e=>t.$emit("cancel"))},{default:u(()=>[F(m(t.cancel),1)]),_:1})):i("",!0),t.submit?(o(),r(p,{key:1,type:"submit",disabled:t.disabled,loading:t.loading},{default:u(()=>[F(m(t.submit),1)]),_:1},8,["disabled","loading"])):i("",!0)])])],544)}var ie=N(O,[["render",K]]);export{ie as default};
